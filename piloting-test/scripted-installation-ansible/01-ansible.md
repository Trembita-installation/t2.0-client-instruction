# üì¶ –Ü–Ω—Å—Ç–∞–ª—è—Ü—ñ—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —á–µ—Ä–µ–∑ Ansible-playbook

–¶–µ–π —Ä–æ–∑–¥—ñ–ª –æ–ø–∏—Å—É—î, —è–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ —Å–∏—Å—Ç–µ–º–∏ –¢—Ä–µ–º–±—ñ—Ç–∞ 2.0 –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ –Ω–∞ –±–∞–∑—ñ **Ansible**.

> ‚ö†Ô∏è **–£–≤–∞–≥–∞!** –ü–µ—Ä–µ–¥ –ø–æ—á–∞—Ç–∫–æ–º —ñ–Ω—Å—Ç–∞–ª—è—Ü—ñ—ó –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤–∏–∫–æ–Ω–∞–Ω–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫—Ä–æ–∫–∏, –æ–ø–∏—Å–∞–Ω—ñ –≤ [README](README.md) —Ü—ñ—î—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó.

## üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, —è–∫—ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—Ç—å—Å—è

- **UXP Security Server (–®–ë–û)**
- **MinIO**
- **ELK**
- **Graylog**
- **Zabbix**
- **MonHub**

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó

| –§–∞–π–ª / –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è                          | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è                                      |
|-------------------------------------------|--------------------------------------------------|
| `ansible.cfg`                             | –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è Ansible                             |
| `inventories/test_ansible/infra.yaml`     | –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä—ñ–≤ (IP, hostname)                   |
| `group_vars/all.yaml`                     | –ó–º—ñ–Ω–Ω—ñ: –ø–∞—Ä–æ–ª—ñ, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ —Ç–æ—â–æ                 |
| `*_install.yaml`                          | –ü–ª–µ–π–±—É–∫–∏ –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–∫—Ä–µ–º–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤    |

--- 

## ‚öôÔ∏è –í–∏–º–æ–≥–∏

- –û–°: **Ubuntu Server 22.04**
- –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π **Ansible 2.12+**
  > **–ù–∞–ø—Ä–∏–∫–ª–∞–¥**, –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è Ansible –º–æ–∂–Ω–∞ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è —Ç–∞–∫–æ—é –∫–æ–º–∞–Ω–¥–æ—é:  
  >```bash
  >sudo apt update && sudo apt install -y ansible
  >```
  
- SSH-–¥–æ—Å—Ç—É–ø –ø–æ –∫–ª—é—á—É –¥–æ —Ü—ñ–ª—å–æ–≤–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤
- –î–æ—Å—Ç—É–ø –¥–æ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç—É –∑ —Ü—ñ–ª—å–æ–≤–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤

## üöÄ –ö—Ä–æ–∫–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π**  
   ```bash
   git clone https://github.com/Trembita-installation/t2.0-client-deployment.git
   ```
2. **–ü–µ—Ä–µ–π—Ç–∏ –¥–æ —Ñ–∞–π–ª—É infra_yaml ( /t2.0-client-deployment.git/inventories/test_ansible/infra_yaml ) —á–µ—Ä–µ–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä –∞–±–æ –∫–æ–Ω—Å–æ–ª—å**
3. **–í–ø–∏—Å–∞—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ ip —Ç–∞ hostname –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤ —Ç–∞ –∑–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏**

   <img width="386" alt="image" src="https://github.com/user-attachments/assets/270e1fb8-c9f0-4306-8211-9cb7d53336d6" /> 

5. **–ü–µ—Ä–µ–π—Ç–∏ –¥–æ —Ñ–∞–π–ª—É all.yaml ( /t2.0-client-deployment.git/inventories/test_ansible/all.yaml ) —Ç–∞ –≤–ø–∏—Å–∞—Ç–∏ –ª–æ–≥—ñ–Ω —ñ –ø–∞—Ä–æ–ª—å –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –¥–ª—è –ø–æ–¥–∞–ª—å—à–∏—Ö –¥–æ—Å—Ç—É–ø—ñ–≤ –¥–æ –≤–µ–±—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ —Ç–∞ —ñ–Ω—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤**

   <img width="764" alt="image" src="https://github.com/user-attachments/assets/606f5748-1796-430c-9891-6a75df0970f9" />


   

2. **–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –∑—ñ —Å–∫—Ä–∏–ø—Ç–∞–º–∏**
   ```bash
   cd t2.0-client-deployment/
   ```

3. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä—ñ–≤**
   ```bash
   ansible -i inventories/test_ansible/infra.yaml all -m ping
   ```

4. **–ü—ñ–¥–≥–æ—Ç—É–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É (–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞–∫–µ—Ç—ñ–≤, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤)**
   ```bash
   ansible-playbook -i inventories/test_ansible/infra.yaml repa.yaml
   ```

5. **–í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –æ–∫—Ä–µ–º—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏:**

   - **Elasticsearch + Kibana**
     ```bash
     ansible-playbook -i inventories/test_ansible/infra.yaml ek_install.yaml
     ```

   - **MinIO**
     ```bash
     ansible-playbook -i inventories/test_ansible/infra.yaml minio_install.yaml
     ```

   - **Graylog**
     ```bash
     ansible-playbook -i inventories/test_ansible/infra.yaml graylog_install.yaml
     ```

   - **Zabbix**
     ```bash
     ansible-playbook -i inventories/test_ansible/infra.yaml zabbix_install.yaml
     ```

   - **UXP Security Server (–®–ë–û)**
     ```bash
     ansible-playbook -i inventories/test_ansible/infra.yaml ss_install.yaml
     ```

---

## üõ† –ö–æ—Ä–∏—Å–Ω—ñ –ø—Ä–∞–ø–æ—Ä—Ü—ñ

–î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è:
```bash
ansible-playbook -vvv -i inventories/test_ansible/infra.yaml <playbook>.yaml
```

---

## üîß –ó–º—ñ–Ω–Ω—ñ

–ó–º—ñ–Ω–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó —Ä–æ–∑–º—ñ—â–µ–Ω–æ —É:
```
inventories/test_ansible/group_vars/all.yaml
```

---

## üìå –ü—Ä–∏–º—ñ—Ç–∫–∞

–Ü–Ω—Å—Ç–∞–ª—è—Ü—ñ—è –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—å —è–∫ **–æ–∫—Ä–µ–º–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**, —Ç–∞–∫ —ñ **–æ–¥—Ä–∞–∑—É –¥–ª—è –≤—Å—ñ—Ö** (—á–µ—Ä–µ–∑ –æ–±‚Äô—î–¥–Ω–∞–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π –∞–±–æ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è playbook-—Ñ–∞–π–ª—ñ–≤).

